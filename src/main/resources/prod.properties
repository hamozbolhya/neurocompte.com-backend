### Application Name
server.address=0.0.0.0
spring.application.name=PracticeFileHandler

### Database Configuration (PostgreSQL) - Use Environment Variables in Production!
spring.datasource.url=jdbc:postgresql://localhost:5432/Pacioli
spring.datasource.username=${DB_USER:postgres}
spring.datasource.password=${DB_PASSWORD:hmz12@BO} # Use environment variable for security
spring.datasource.driver-class-name=org.postgresql.Driver
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.properties.hibernate.jdbc.batch_size=50
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.cache.use_second_level_cache=false
spring.jpa.properties.hibernate.cache.use_query_cache=false
spring.jpa.properties.hibernate.generate_statistics=false

### Connection Pooling (HikariCP) - Faster DB Queries
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=60000
spring.datasource.hikari.max-lifetime=1800000

### Logging - Reduce Debug Logs in Production
logging.level.org.springframework.web=INFO
logging.level.org.springframework.security=INFO
logging.level.org.hibernate.SQL=WARN
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=ERROR
logging.config=classpath:logback-spring.xml

### Logs Directory Configuration - PROD
logs.dir=/app/logs/prod

### File Upload Configuration
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=100MB
file.upload.dir=/app/files

### Tomcat Performance Optimization
server.tomcat.max-threads=200
server.tomcat.accept-count=100
server.tomcat.connection-timeout=5000
server.tomcat.mbeanregistry.enabled=true

### Enable Async Processing (For Large Requests & File Uploads)
spring.mvc.async.request-timeout=60000
spring.task.execution.pool.core-size=10
spring.task.execution.pool.max-size=20
spring.task.execution.pool.queue-capacity=50

### Set HTTP Port for Production
server.port=8080

### Enable Actuator Health Check (For Monitoring)
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=always

### Enable GZIP Compression (Reduces Response Size)
server.compression.enabled=true
server.compression.mime-types=application/json,text/html,text/xml,text/plain
server.compression.min-response-size=1024

spring.jpa.properties.hibernate.cache.region.factory_class=org.hibernate.cache.ehcache.EhCacheRegionFactory

### AI Service Configuration - Production
ai.service.url= https://srwwucsjo0.execute-api.us-east-1.amazonaws.com/prod/invoice/
ai.service.api-key=u4d9s6oPlh8BGnlfFkT4P1iuZKKP9heZ5uvJ57pL
ai.service.base-url=https://jh5w8zmfcb.execute-api.us-east-1.amazonaws.com/prod/company

### JWT Configuration
jwt.secret=c1194df3f35adf875f7dc30d89f366492f184a4c0e84c32ce2c98eeb5574a5dd
jwt.expiration=30000000

### Exchange Rate API
currency.api.key=c30f7be26bab4be293cc351c7761ea6b

### Histoire AI Configuration - Production
histoire.ai.api-key=u4d9s6oPlh8BGnlfFkT4P1iuZKKP9heZ5uvJ57pL
histoire.ai.base-url=https://srwwucsjo0.execute-api.us-east-1.amazonaws.com/prod/history

# Cache analytics for 5 minutes
spring.cache.cache-names=adminAnalytics,adminAnalyticsPeriod
spring.cache.caffeine.spec=maximumSize=100,expireAfterWrite=5m


# Bank API Configuration
bank.api.url=https://6uedigfrj6.execute-api.us-east-1.amazonaws.com/prod/bank
bank.api.stage=prod
bank.api.max-file-size=10MB
bank.api.allowed-extensions=pdf,jpeg,jpg,png

# Add to your application.properties or application.yml
# Batch Processing Configuration
batch.processing.batch-size=50
batch.processing.max-retries=4
batch.processing.retry-delay-ms=300000
batch.processing.normal.retry-delay-ms=30000
batch.processing.thread-pool-size=20
batch.processing.core-pool-size=10
batch.processing.max-pool-size=50
batch.processing.queue-capacity=100

# HikariCP Configuration
spring.datasource.hikari.connection-test-query=SELECT 1
spring.datasource.hikari.validation-timeout=5000
spring.datasource.hikari.leak-detection-threshold=60000